asyncapi: 2.6.0
channels:
  room/{roomId}:
    description: Chat room channel for sending and receiving messages
    publish:
      message: {}
      summary: Send messages to the chat room
    subscribe:
      message: {}
      summary: Receive messages from the chat room
  user/{userId}/presence:
    description: User presence status updates
    subscribe:
      message: {}
      summary: Receive user presence updates
components:
  messages:
    chatMessage:
      contentType: application/json
      name: ChatMessage
      payload:
        properties:
          edited:
            description: Whether the message has been edited
            type: boolean
          id:
            description: Unique message identifier
            type: string
          text:
            description: Message content
            type: string
          timestamp:
            description: When the message was sent
            type: string
          userId:
            description: ID of the user who sent the message
            type: string
          username:
            description: Display name of the user
            type: string
        required:
          - id
          - userId
          - text
          - timestamp
        type: object
      summary: A chat message from a user
      title: Chat Message
    presenceUpdate:
      contentType: application/json
      name: PresenceUpdate
      payload:
        properties:
          status:
            description: "User's current status"
            type: string
          timestamp:
            description: When the status changed
            type: string
          userId:
            description: User identifier
            type: string
        required:
          - userId
          - status
          - timestamp
        type: object
      summary: User presence status change
      title: Presence Update
info:
  description: WebSocket-based real-time chat application
  license:
    name: Apache 2.0
    url: "https://www.apache.org/licenses/LICENSE-2.0.html"
  title: Real-time Chat API
  version: 1.0.0
servers:
  development:
    description: Development WebSocket server
    protocol: ws
    url: "ws://localhost:8080/v1"
  production:
    description: Production WebSocket server
    protocol: ws
    url: "wss://chat.example.com/v1"
