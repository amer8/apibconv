asyncapi: 3.0.0
channels:
  userDeletion:
    address: user.deleted
    description: Channel for user deletion events
    messages:
      userDeleted: {}
  userProfile:
    address: user.profile.updated
    description: Channel for user profile update events
    messages:
      profileUpdated: {}
  userSignup:
    address: user.signup
    description: Channel for user signup events
    messages:
      userSignedUp: {}
components:
  messages:
    ProfileUpdated:
      contentType: application/json
      name: ProfileUpdated
      payload:
        properties:
          profileData:
            description: Updated profile information
            properties:
              avatarUrl:
                type: string
              bio:
                type: string
              displayName:
                type: string
            type: object
          updateTime:
            description: When the update occurred
            type: string
          updatedFields:
            description: List of fields that were updated
            items:
              type: string
            type: array
          userId:
            description: User identifier
            type: string
        required:
          - userId
          - updatedFields
          - updateTime
        type: object
      summary: Event published when a user updates their profile
      title: Profile Updated Event
    UserDeleted:
      contentType: application/json
      name: UserDeleted
      payload:
        properties:
          dataRetentionDays:
            description: Number of days before permanent data deletion
            type: integer
          deletionDate:
            description: When the account was deleted
            type: string
          email:
            description: Email address (for audit purposes)
            type: string
          reason:
            description: Reason for account deletion
            type: string
          userId:
            description: ID of the deleted user
            type: string
        required:
          - userId
          - deletionDate
          - reason
        type: object
      summary: Event published when a user account is deleted
      title: User Deleted Event
    UserSignedUp:
      contentType: application/json
      name: UserSignedUp
      payload:
        properties:
          email:
            description: "User's email address"
            type: string
          referralSource:
            description: How the user found the service
            type: string
          signupDate:
            description: Timestamp when the user signed up
            type: string
          userId:
            description: Unique user identifier
            example: user_123456
            type: string
          username:
            description: "User's chosen username"
            type: string
        required:
          - userId
          - email
          - signupDate
        type: object
      summary: Event published when a new user creates an account
      title: User Signed Up Event
info:
  description: Kafka-based event streaming API for user lifecycle events
  title: User Events API
  version: 1.0.0
operations:
  onProfileUpdate:
    action: receive
    channel:
      $ref: "#/channels/userProfile"
    description: Consume profile update events
    summary: Notified when a user profile is updated
  onUserSignup:
    action: receive
    channel:
      $ref: "#/channels/userSignup"
    description: Consume user signup events from the Kafka topic
    summary: Notified when a new user signs up
  publishUserDeletion:
    action: send
    channel:
      $ref: "#/channels/userDeletion"
    description: Send a message when a user account is deleted
    summary: Publish user deletion event
servers:
  production:
    description: Production Kafka cluster
    protocol: kafka
    url: ""
  staging:
    description: Staging Kafka cluster
    protocol: kafka
    url: ""
